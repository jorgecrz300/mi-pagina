<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cancionero de Mam√° - M√≥vil</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --main-color: #d35400; --bg-paper: #fdfaf6; --text-color: #2c3e50; }
        
        /* Ajustes para que en el cel se vea todo grande */
        body { font-family: 'Georgia', serif; background: var(--bg-paper); color: var(--text-color); margin: 0; padding: 15px; }
        
        .container { max-width: 100%; margin: auto; padding-bottom: 80px; }

        .header { text-align: center; margin-bottom: 30px; }
        h1 { font-size: 24px; color: var(--main-color); }

        /* Buscador optimizado para dedos */
        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #buscador { 
            flex: 1;
            padding: 15px; 
            border-radius: 10px; 
            border: 2px solid var(--main-color); 
            font-size: 16px;
            outline: none;
        }

        .btn-buscar {
            background: var(--main-color);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 10px;
            font-size: 20px;
            cursor: pointer;
        }

        /* Tarjetas centradas */
        .canto-card { 
            background: white; padding: 25px; border-radius: 12px; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.1); text-align: center;
            border: 1px solid #f0e0d0; margin-bottom: 25px;
        }

        .titulo-canto { color: var(--main-color); font-size: 22px; font-weight: bold; margin-bottom: 10px; }
        .letra-canto { font-size: 18px; white-space: pre-line; color: #34495e; }

        /* Bot√≥n PDF m√°s grande para el pulgar */
        .btn-pdf { 
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%);
            background: #27ae60; color: white; border: none; 
            padding: 15px 30px; border-radius: 30px; 
            font-weight: bold; font-size: 16px; width: 80%;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 100;
        }

        #area-pdf { display: none; text-align: center; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>üìñ Mis Cantos</h1>
        <div class="search-container">
            <input type="search" id="buscador" placeholder="Buscar canto..." oninput="filtrarLocal()">
            <button class="btn-buscar" onclick="buscarExterno()">üîç</button>
        </div>
        <p style="font-size: 12px; color: #7f8c8d;">Escribe y toca la lupa para buscar en Google</p>
    </div>
    
    <div id="visor"></div>

    <button class="btn-pdf" onclick="generarPDF()">üì• DESCARGAR PDF</button>
</div>

<div id="area-pdf"></div>

<script>
    const cantos = [
        { 
            titulo: "Pescador de Hombres", 
            letra: `T√∫ has venido a la orilla,\nno has buscado ni a sabios ni a ricos,\ntan solo quieres que yo te siga.\n\nSe√±or, me has mirado a los ojos,\nsonriendo has dicho mi nombre,\nen la arena he dejado mi barca,\njunto a ti buscar√© otro mar.` 
        },
        { 
            titulo: "Paz en la Tierra", 
            letra: `La paz est√© con nosotros,\nque el mundo se llene de amor,\nunidos todos de la mano,\nle cantamos al Creador.` 
        }
    ];

    function cargarCantos() {
        const visor = document.getElementById('visor');
        visor.innerHTML = '';
        cantos.forEach((canto) => {
            visor.innerHTML += `
                <div class="canto-card">
                    <div class="titulo-canto">${canto.titulo}</div>
                    <div class="letra-canto">${canto.letra}</div>
                </div>
            `;
        });
    }

    function filtrarLocal() {
        const query = document.getElementById('buscador').value.toLowerCase();
        const cards = document.querySelectorAll('.canto-card');
        cards.forEach((card, index) => {
            const match = cantos[index].titulo.toLowerCase().includes(query);
            card.style.display = match ? 'block' : 'none';
        });
    }

    // Esta funci√≥n maneja la b√∫squeda externa
    function buscarExterno() {
        const cancion = document.getElementById('buscador').value;
        if (cancion.trim() !== "") {
            const sitios = "site:cantoralcatolico.com OR site:acordescatolicos.com";
            const url = `https://www.google.com/search?q=${encodeURIComponent(cancion)} ${sitios}`;
            window.open(url, '_blank');
        }
    }

    // Escuchar el Enter del teclado m√≥vil
    document.getElementById('buscador').addEventListener('keyup', function (e) {
        if (e.key === 'Enter') {
            buscarExterno();
        }
    });

    function generarPDF() {
        const areaPdf = document.getElementById('area-pdf');
        areaPdf.innerHTML = '<h1>MI CANCIONERO</h1>';
        areaPdf.style.display = 'block';

        cantos.forEach(canto => {
            areaPdf.innerHTML += `
                <div style="page-break-after: always; padding: 40px; text-align: center;">
                    <h1 style="color: #d35400;">${canto.titulo}</h1>
                    <div style="font-size: 20px; line-height: 1.6; white-space: pre-line;">${canto.letra}</div>
                </div>
            `;
        });

        html2pdf().set({
            margin: 0.5,
            filename: 'Cantos_Mama.pdf',
            jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
        }).from(areaPdf).save().then(() => { areaPdf.style.display = 'none'; });
    }

    cargarCantos();
</script>

</body>
</html>
