<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Catch - Relax & Play</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #a1c4fd 0%, #c2e9fb 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            cursor: crosshair;
            user-select: none;
        }

        /* Estilo del Juego Bonito */
        #game-ui {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            color: #5d5d5d;
            font-size: 24px;
            z-index: 10;
        }

        .collectible {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #ffcc33;
            border-radius: 50%;
            box-shadow: 0 0 15px white;
            transition: transform 0.2s;
        }

        /* Pantalla del Screamer (Oculta al inicio) */
        #screamer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: black;
            display: none;
            z-index: 9999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #screamer img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #error-msg {
            position: absolute;
            color: #ff0000;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.2rem;
            bottom: 10%;
            text-align: center;
        }

        #start-btn {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px;
            font-size: 24px;
            background: white;
            border: none;
            border-radius: 50px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            z-index: 100;
        }
    </style>
</head>
<body>

    <button id="start-btn" onclick="iniciarTodo()">EMPEZAR JUEGO</button>

    <div id="game-ui">Puntos: <span id="score">0</span></div>
    
    <div id="screamer">
        <img src="https://wallpapers.com/images/hd/scary-clown-pictures-6j9l8m5z2c3y7m1z.jpg" alt="SYSTEM_ERROR">
        <div id="error-msg">
            ERROR CRÍTICO: VIOLACIÓN DE MEMORIA DETECTADA... <br>
            BLOQUEANDO TERMINAL PARA PREVENIR DAÑOS AL HARDWARE <br>
            REPARANDO: <span id="percent">0</span>%
        </div>
    </div>

    <audio id="susto-audio" loop>
        <source src="https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Scary+Scream&filename=24/243677-43093952-6712-4014-9904-877232230784.mp3" type="audio/mpeg">
    </audio>

    <script>
        let score = 0;
        let gameActive = false;

        function iniciarTodo() {
            document.getElementById('start-btn').style.display = 'none';
            gameActive = true;
            
            // Intentar entrar en Fullscreen para el bloqueo
            const doc = document.documentElement;
            if (doc.requestFullscreen) doc.requestFullscreen();

            spawnItem();
        }

        function spawnItem() {
            if (!gameActive) return;
            const item = document.createElement('div');
            item.className = 'collectible';
            item.style.left = Math.random() * (window.innerWidth - 50) + 'px';
            item.style.top = Math.random() * (window.innerHeight - 50) + 'px';
            
            // Si no le picas rápido, "mueres" y sale el susto
            const timer = setTimeout(activarTrampa, 1500); 

            item.onclick = () => {
                clearTimeout(timer);
                score++;
                document.getElementById('score').innerText = score;
                item.remove();
                spawnItem();
            };
            document.body.appendChild(item);
        }

        function activarTrampa() {
            gameActive = false;
            const screamer = document.getElementById('screamer');
            const audio = document.getElementById('susto-audio');
            
            screamer.style.display = 'flex';
            audio.play();

            // --- BLOQUEO TÉCNICO ---
            
            // 1. Bloquear el Mouse
            document.documentElement.requestPointerLock();

            // 2. Bloquear Teclado (No deja usar ESC en muchos navegadores)
            if (navigator.keyboard && navigator.keyboard.lock) {
                navigator.keyboard.lock(["Escape", "Tab", "MetaLeft", "MetaRight"]);
            }

            // 3. Evitar que cierren con clic derecho
            document.addEventListener('contextmenu', event => event.preventDefault());

            // 4. Temporizador de 2 minutos (120 segundos)
            let progreso = 0;
            const intervalo = setInterval(() => {
                progreso += 0.83; // Para llegar a 100 en 120 seg aprox
                document.getElementById('percent').innerText = Math.floor(progreso);
                
                if (progreso >= 100) {
                    clearInterval(intervalo);
                    location.reload(); // Se refresca y los deja libres
                }
            }, 1000);
        }

        // Si intentan salir de pantalla completa, los regresa (mientras no sea el susto)
        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement && gameActive) {
                alert("Debes jugar en pantalla completa para continuar.");
                iniciarTodo();
            }
        });
    </script>
</body>
</html>
